(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,9165,e=>{"use strict";var t;e.s(["fetchNextTest",()=>n,"getMyResults",()=>o,"getOverview",()=>r,"login",()=>i,"startTest",()=>c,"submitAttempt",()=>l]);let s=null!=(t=e.i(47167).default.env.NEXT_PUBLIC_API_BASE)?t:"/api";async function a(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=localStorage.getItem("dtest_token"),i={"Content-Type":"application/json"};a&&(i.Authorization="Bearer ".concat(a));let n=await fetch("".concat(s).concat(e),{...t,headers:i});if(!n.ok)throw Error((await n.json().catch(()=>({message:n.statusText}))).message||n.statusText);return n.json()}let i=(e,t)=>a("/auth/login",{method:"POST",body:JSON.stringify({email:e,password:t})}),n=e=>a("/tests/next".concat(e?"?level=".concat(e):"")),c=e=>a("/tests/".concat(e,"/start")),l=(e,t)=>a("/attempts/".concat(e,"/submit"),{method:"POST",body:JSON.stringify({responses:t})}),o=()=>a("/attempts/me"),r=()=>a("/stats/overview")},18566,(e,t,s)=>{t.exports=e.r(76562)},9938,e=>{"use strict";e.s(["default",()=>l]);var t=e.i(43476),s=e.i(71645),a=e.i(18566),i=e.i(19455),n=e.i(9165);function c(){let e=(0,a.useSearchParams)(),c=(0,a.useRouter)(),[l,o]=(0,s.useState)(null),[r,d]=(0,s.useState)(null),[u,m]=(0,s.useState)(null),[h,p]=(0,s.useState)({});async function x(e){m(await (0,n.startTest)(e))}async function g(){if(!u)return;let e=Object.keys(h).map(e=>({questionId:e,answer:h[e]})),t=await (0,n.submitAttempt)(u._id,e);alert("Score: ".concat(t.score,"%")),c.push("/user/dashboard")}return((0,s.useEffect)(()=>{o(e.get("id")),d(e.get("attemptId"))},[e]),(0,s.useEffect)(()=>{l&&x(l)},[l,r]),u)?(0,t.jsxs)("div",{children:[(0,t.jsxs)("h2",{className:"text-xl font-semibold mb-4",children:["Reading Test (",u.level,")"]}),u.passages.map(e=>(0,t.jsxs)("div",{className:"mb-6",children:[(0,t.jsx)("div",{className:"mb-2 p-4 border rounded bg-white",children:e.text}),(0,t.jsx)("div",{className:"space-y-3 mt-2",children:e.questions.map(e=>(0,t.jsxs)("div",{className:"p-3 border rounded",children:[(0,t.jsx)("div",{className:"font-medium",children:e.text}),"mcq"===e.type&&(e.options||[]).map(s=>(0,t.jsxs)("label",{className:"block",children:[(0,t.jsx)("input",{type:"radio",name:e._id,onChange:()=>p(t=>({...t,[e._id]:s}))})," ",s]},s)),"tf"===e.type&&(0,t.jsxs)("div",{children:[(0,t.jsxs)("label",{children:[(0,t.jsx)("input",{type:"radio",name:e._id,onChange:()=>p(t=>({...t,[e._id]:!0}))})," ","True"]}),(0,t.jsxs)("label",{className:"ml-4",children:[(0,t.jsx)("input",{type:"radio",name:e._id,onChange:()=>p(t=>({...t,[e._id]:!1}))})," ","False"]})]})]},e._id))})]},e._id)),(0,t.jsx)(i.Button,{onClick:g,children:"Submit"})]}):(0,t.jsx)("div",{children:"Loading test..."})}function l(){return(0,t.jsx)(s.Suspense,{fallback:(0,t.jsx)("div",{children:"Loading test page..."}),children:(0,t.jsx)(c,{})})}}]);