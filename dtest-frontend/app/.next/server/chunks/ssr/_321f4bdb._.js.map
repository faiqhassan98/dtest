{"version":3,"sources":["turbopack:///[project]/src/lib/api.ts","turbopack:///[project]/node_modules/next/navigation.js","turbopack:///[project]/src/app/page.tsx","turbopack:///[project]/src/components/ui/input.tsx"],"sourcesContent":["import { \n  LoginResponse, Test, TestAttempt, TestAttemptResponse, User, Overview, \n  UserPerformance\n} from './types';\n\nconst BASE = process.env.NEXT_PUBLIC_API_BASE ?? '/api';\n\nasync function request<T>(path: string, opts: RequestInit = {}): Promise<T> {\n  const token = typeof window !== 'undefined' ? localStorage.getItem('dtest_token') : null;\n  const headers: Record<string,string> = { 'Content-Type': 'application/json' };\n  if (token) headers['Authorization'] = `Bearer ${token}`;\n  \n  const res = await fetch(`${BASE}${path}`, { ...opts, headers });\n  if (!res.ok) {\n    const body = await res.json().catch(() => ({ message: res.statusText }));\n    throw new Error(body.message || res.statusText);\n  }\n  return res.json();\n}\n\n// Auth\nexport const login = (email: string, password: string): Promise<LoginResponse> =>\n  request<LoginResponse>('/auth/login', { method: 'POST', body: JSON.stringify({ email, password }) });\n\n// Tests\nexport const fetchNextTest = (level?: string): Promise<Test> =>\n  request<Test>(`/tests/next${level ? `?level=${level}` : ''}`);\n\nexport const startTest = (id: string): Promise<Test> =>\n  request<Test>(`/tests/${id}/start`);\n\nexport const submitAttempt = (testId: string, responses: { questionId: string; answer: string | boolean }[]): Promise<TestAttemptResponse> =>\n  request<TestAttemptResponse>(`/attempts/${testId}/submit`, { method: 'POST', body: JSON.stringify({ responses }) });\n\nexport const getMyResults = (): Promise<TestAttempt[]> =>\n  request<TestAttempt[]>('/attempts/me');\n\n// Admin users\nexport const listUsers = (): Promise<User[]> => request<User[]>('/users');\n\nexport const createUser = (payload: Omit<User, '_id'>): Promise<User> =>\n  request<User>('/users', { method: 'POST', body: JSON.stringify(payload) });\n\nexport const updateUser = (id:string, payload: Partial<User>): Promise<User> =>\n  request<User>(`/users/${id}`, { method: 'PATCH', body: JSON.stringify(payload) });\n\nexport const deleteUser = (id:string): Promise<{ success: boolean }> =>\n  request<{ success: boolean }>(`/users/${id}`, { method: 'DELETE' });\n\n// Admin tests\nexport const listTests = (): Promise<Test[]> => request<Test[]>('/tests');\n\nexport const createTest = (payload: Omit<Test, '_id'>): Promise<Test> =>\n  request<Test>('/tests', { method: 'POST', body: JSON.stringify(payload) });\n\nexport const updateTest = (id:string, payload: Partial<Test>): Promise<Test> =>\n  request<Test>(`/tests/${id}`, { method: 'PATCH', body: JSON.stringify(payload) });\n\nexport const deleteTest = (id:string): Promise<{ success: boolean }> =>\n  request<{ success: boolean }>(`/tests/${id}`, { method: 'DELETE' });\n\n// Stats\nexport const getOverview = (): Promise<Overview> => request<Overview>('/stats/overview');\n\nexport const getUserPerformance = (userId: string): Promise<UserPerformance> =>\n  request<UserPerformance>(`/stats/user/${userId}`);\n","module.exports = require('./dist/client/components/navigation')\n","'use client';\n\nimport { useState } from 'react';\nimport { useRouter } from 'next/navigation';\nimport { Button } from '@/components/ui/button';\nimport { Input } from '@/components/ui/input';\nimport { login } from '@/lib/api';\nimport { useAuth } from '@/lib/auth-store';\nimport { LoginResponse } from '@/lib/types'; // <-- import here\n\nexport default function Page() {\n  const [email, setEmail] = useState<string>('');\n  const [password, setPassword] = useState<string>('');\n  const [loading, setLoading] = useState<boolean>(false);\n  const auth = useAuth();\n  const router = useRouter();\n\n  async function submit(e: React.FormEvent<HTMLFormElement>) {\n    e.preventDefault();\n    setLoading(true);\n\n    try {\n      const res: LoginResponse = await login(email, password);\n      auth.signIn(res.token, res.user);\n\n      if (res.user.role === 'admin') router.push('/admin/dashboard');\n      else router.push('/user/dashboard');\n    } catch (err: unknown) {\n      const message = err instanceof Error ? err.message : 'Login failed';\n      alert(message);\n    } finally {\n      setLoading(false);\n    }\n  }\n\n  return (\n    <div className=\"max-w-md mx-auto mt-20\">\n      <h1 className=\"text-2xl font-semibold mb-4\">DTest â€” Login</h1>\n      <form onSubmit={submit} className=\"space-y-4\">\n        <Input\n          value={email}\n          onChange={(e) => setEmail(e.target.value)}\n          placeholder=\"Email\"\n          type=\"email\"\n          required\n        />\n        <Input\n          value={password}\n          onChange={(e) => setPassword(e.target.value)}\n          placeholder=\"Password\"\n          type=\"password\"\n          required\n        />\n        <Button type=\"submit\" disabled={loading}>\n          {loading ? 'Signing in...' : 'Sign In'}\n        </Button>\n      </form>\n    </div>\n  );\n}","import * as React from \"react\"\n\nimport { cn } from \"@/lib/utils\"\n\nfunction Input({ className, type, ...props }: React.ComponentProps<\"input\">) {\n  return (\n    <input\n      type={type}\n      data-slot=\"input\"\n      className={cn(\n        \"file:text-foreground placeholder:text-muted-foreground selection:bg-primary selection:text-primary-foreground dark:bg-input/30 border-input flex h-9 w-full min-w-0 rounded-md border bg-transparent px-3 py-1 text-base shadow-xs transition-[color,box-shadow] outline-none file:inline-flex file:h-7 file:border-0 file:bg-transparent file:text-sm file:font-medium disabled:pointer-events-none disabled:cursor-not-allowed disabled:opacity-50 md:text-sm\",\n        \"focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px]\",\n        \"aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\n\nexport { Input }\n"],"names":[],"mappings":"mKAKA,IAAM,EAAO,QAAQ,GAAG,CAAC,oBAAoB,EAAI,OAEjD,eAAe,EAAW,CAAY,CAAE,EAAoB,CAAC,CAAC,EAK5D,IAAM,EAAM,MAAM,MAAM,CAAA,EAAG,EAAA,EAAO,EAAA,CAAM,CAAE,CAAE,GAAG,CAAI,CAAE,QAHd,CAAE,eAAgB,kBAAmB,CAGf,GAC7D,GAAI,CAAC,EAAI,EAAE,CAET,CAFW,KAEL,AAAI,MAAM,CADH,MAAM,EAAI,IAAI,GAAG,KAAK,CAAC,IAAM,CAAC,CAAE,QAAS,EAAI,UAAU,CAAC,CAAC,CAAA,EACjD,OAAO,EAAI,EAAI,UAAU,EAEhD,OAAO,EAAI,IAAI,EACjB,CAGO,IAAM,EAAQ,CAAC,EAAe,IACnC,EAAuB,cAAe,CAAE,OAAQ,OAAQ,KAAM,KAAK,SAAS,CAAC,OAAE,EAAO,UAAS,EAAG,GAGvF,EAAgB,AAAC,GAC5B,EAAc,CAAC,WAAW,EAAE,EAAQ,CAAC,OAAO,EAAE,EAAA,CAAO,CAAG,GAAA,CAAI,EAEjD,EAAY,AAAC,GACxB,EAAc,CAAC,OAAO,EAAE,EAAG,MAAM,CAAC,EAEvB,EAAgB,CAAC,EAAgB,IAC5C,EAA6B,CAAC,UAAU,EAAE,EAAO,OAAO,CAAC,CAAE,CAAE,OAAQ,OAAQ,KAAM,KAAK,SAAS,CAAC,CAAE,WAAU,EAAG,GAEtG,EAAe,IAC1B,EAAuB,gBA2BZ,EAAc,IAAyB,EAAkB,oCC9DtE,EAAO,OAAO,CAAA,EAAA,CAAA,CAAA,6ECEd,EAAA,EAAA,CAAA,CAAA,OACA,EAAA,EAAA,CAAA,CAAA,OACA,EAAA,EAAA,CAAA,CAAA,OCFA,EAAA,EAAA,CAAA,CAAA,OAEA,SAAS,EAAM,WAAE,CAAS,MAAE,CAAI,CAAE,GAAG,EAAsC,EACzE,MACE,CAAA,EAAA,EAAA,GAAA,EAAC,QAAA,CACC,KAAM,EACN,YAAU,QACV,UAAW,CAAA,EAAA,EAAA,EAAA,AAAE,EACX,kcACA,gFACA,yGACA,GAED,GAAG,CAAK,EAGf,CDZA,IAAA,EAAA,EAAA,CAAA,CAAA,OACA,EAAA,EAAA,CAAA,CAAA,MAGe,SAAS,IACtB,GAAM,CAAC,EAAO,EAAS,CAAG,CAAA,EAAA,EAAA,QAAA,AAAQ,EAAS,IACrC,CAAC,EAAU,EAAY,CAAG,CAAA,EAAA,EAAA,QAAA,AAAQ,EAAS,IAC3C,CAAC,EAAS,EAAW,CAAG,CAAA,EAAA,EAAA,QAAA,AAAQ,EAAU,IAC1C,EAAO,CAAA,EAAA,EAAA,OAAA,AAAO,IACd,EAAS,CAAA,EAAA,EAAA,SAAA,AAAS,IAExB,eAAe,EAAO,CAAmC,EACvD,EAAE,cAAc,GAChB,GAAW,GAEX,GAAI,CACF,IAAM,EAAqB,MAAM,CAAA,EAAA,EAAA,KAAA,AAAK,EAAC,EAAO,GAC9C,EAAK,MAAM,CAAC,EAAI,KAAK,CAAE,EAAI,IAAI,EAET,UAAlB,EAAI,IAAI,CAAC,IAAI,CAAc,EAAO,IAAI,CAAC,oBACtC,EAAO,IAAI,CAAC,kBACnB,CAAE,MAAO,EAAc,CAErB,MADgB,AACV,aADyB,MAAQ,EAAI,OAAO,CAAG,eAEvD,QAAU,CACR,GAAW,EACb,CACF,CAEA,MACE,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,mCACb,CAAA,EAAA,EAAA,GAAA,EAAC,KAAA,CAAG,UAAU,uCAA8B,kBAC5C,CAAA,EAAA,EAAA,IAAA,EAAC,OAAA,CAAK,SAAU,EAAQ,UAAU,sBAChC,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,CACC,MAAO,EACP,SAAU,AAAC,GAAM,EAAS,EAAE,MAAM,CAAC,KAAK,EACxC,YAAY,QACZ,KAAK,QACL,QAAQ,CAAA,CAAA,IAEV,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,CACC,MAAO,EACP,SAAU,AAAC,GAAM,EAAY,EAAE,MAAM,CAAC,KAAK,EAC3C,YAAY,WACZ,KAAK,WACL,QAAQ,CAAA,CAAA,IAEV,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,MAAM,CAAA,CAAC,KAAK,SAAS,SAAU,WAC7B,EAAU,gBAAkB,iBAKvC","ignoreList":[1]}